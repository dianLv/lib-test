* 特殊模块的用例
### 网络
* 交互
	* 网关消息分发 vs 客户端消息处理(能力)
	* 前后端心跳机制(单向，双向)
	* 消息安全(网关)
		* 消息体(合法性)校验
			* 版本
			* 结构体
		* (大)数据包完整性
		* 消息加密/解密
		* 防刷/反刷
			* 包频率控制(限制)
			* id自增->防止重发
			* 图形识别码(防注册、创角)
			* 测谎(双方通过约定口号进行交互)
			* 行为(特征)分析等
	* 通讯与连接
		* 客户端->消息体->封包->网络/路由->服务器网关(分发)->服务器
		* 采用tcp/ip+protobuf+rpc的形似，或其他类型(如UDP， KCP等)，具体按游戏类型及交互方式
* 接口(协议)
	* 基础
		* 消息重发(幂等性检查)
		* 嫁接(其他玩家)正常数据(串号检查)
		* 无视接口条件
		* 参数伪造
			* 参数值(二进制，整数，枚举值，字符串)
			* 参数数据类型(意义不大，结构体不一致，无法过合法性验证)
		* 请求顺序混乱
	* 风险点
		* 突破限制，如
			* 计数(计数为0时，超过最大计数)
			* 等级、任务、进度、资源、位置、状态等
			* 权限(组队、工会等)
			* 时间(非活动时间)
			* 屏蔽字(风险点)
			* 枚举外的数值
		* 伪造与其他玩家的交互数据(防止交互攻击)
			* 防止服务器转发数据导致的异常
			* 防止伪造消息对正常客户端的影响
		* 异常消息引发的服务器异常(无响应，卡顿、阻塞、崩溃等)
		* 防止特殊(未开放、预留、一次性)接口被滥用
		* 收集确认经过接口测试锻炼过的账号的游戏表现(用于对用户反馈进行识别)
		* p.s. 很多时候其他网络问题，溯源都在接口实现的健壮性不足
	* 拓展
		* 监听前后端交互过程(如使用Npcap+解包)->关注点，如
			* 收发时间(请求响应)
			* 收发内容
			* 收发包的大小
			* 单位时间内收发包的频率
			* 单位时间内特定包的频率
		* 协议录制(用于压测的真人模拟)
		* 利用接口开发机器人->功能，如
			* 维持在线人数
			* 维持场景人数
			* 维持前后端交互内容
			* 模拟组队、副本
			* 其他
* 弱网->(时延、丢包、抖动、带宽等)低效传输导致消息的收发时间无限延长
	* 提示机制->loading+文本
	* 影响
		* 无法进入游戏(登录时需要拉取大量数据)
		* 同步异常->移动、技能释放等
		* 触发断线(会话中断、心跳超时)
		* 请求超时(重试机制)
		* 消息堆积
* 断线/重连
	* 断线原因
		* 网络中断(物理)
			* 网络切换
			* wifi/数据流量关闭
			* 来电
		* 挂后台(影响心跳)
		* 心跳超时(应用)
		* 服务器会话中断(客户端对应表现(客户端能否获得原因))
			* 账号异常(如，封禁)
			* 异常登录(如，顶号(取决于机制设计))
			* 客户端心跳超时
			* 客户端行为消极
			* 服务器关闭、重启
			* 服务器更新、维护
			* 服务器内部异常(不同服务异常导致的断线也有所不同)，如
				* 服务器响应超时(服务器内部也存在通讯)
				* 关键服务挂起、崩溃
				* ~~服务器负载压力大~~
				* ~~服务器带宽不足等~~
	* 断线时机
		* 客户端发送消息前网络中断(异常)
		* 客户端发送消息时网络中断
			* 客户端上报服务器
			* 客户端与服务器交互(请求未响应)
			* 客户端与服务器交互过程中(响应时丢失数据)
		* 服务器通知客户端时主动断开
	* 断线影响
		* 交互异常
			* 无法进入游戏
			* 无法操作
		* 客户端异常与闪退
			* 如，界面卡死
			* 如，卡状态，技能的释放状态无法退出
			* 如，网络异常导致的闪退
		* 前后端数据不一致(如位置、状态、组队等)
		* 玩法中断或失败，关键奖励丢失
	* 断线重连
		* 重连方式
			* 强感知
				* (强制)弹窗选择
				* 重新登录(如返回角色大厅)
				* 离开游戏后重新登录
			* 低感知
				* 自动重连
		* 无法重连
			* 网络未恢复
			* 服务器无法连接(连接失败)
				* 服务器未开启
				* 客户端未更新(版本不一致)
				* 服务器在线人数限制
			* 服务器状态异常
				* 服务器中保留前登录状态导致的无法登录
					* 客户端更换角色时断线，导致的无法登录
		* 重连检查->网络恢复后
			* 重连后能否正常同步消息
			* 重连后是否出现前后端数据不一致(人物状态的变化)
				* 如断线后将玩家踢出当前场景，重连后未同步位置信息
				* 如断线期间经验变化导致的等级不一致
			* 客户端是否缓存断线期间的操作并在恢复后重新发送
			* 重连后对服务器缓存机制的影响
		* 特殊情况，如
			* 跨服期间的断线重连
			* 是否存在断线补偿机制
			* 在服务器同步数据多的情况下进行重连
			* 同时在线(离线被顶)
### 性能
* 前端
* 后端
	* 压测方式->程序(通讯)模拟，真机模拟
	* 压测对象->版本，模式(debug?release?)，日志开关等
	* 压测场景
	* 负载能力
	* 稳定性
	* 容灾(进程、硬件平台、机柜/机房)
		* 可恢复/不可恢复
		* 恢复时间(如，(自动)重启恢复，涉及故障排除的运维恢复、程序恢复)
	* 参数验证(注册、在线(如何界定在线))
### 兼容性
* (UI)分辨率
* 跨语言的兼容(排版、数值呈现)
* 设备/平台等
	* 应用间兼容
	* 权限的兼容
* 开发环境与生产环境的兼容->如文件读取
### 安全(略)

### 其他
* 备份/回档->快速、0损的测试特定内容
	* 准备账号/角色，完成前期准备
	* 停服并完成游戏数据**备份**，记录服务器当前时间
	* 清档(可省略)
	* 将服务器时间及数据还原，并重新拉起服务器，完成**回档**
		* 失败/失效：服务器更新(数据结构、玩法配置的变更)
* 测试的生命周期
	* 列出参考->策划案、需求清单、实现方案(技术文档、配表)+交互协议等
		* 策划案->设计意图，预期目标+分期(阶段)目标
		* 需求清单(细节、规则、变更)，UI交互图
		* 实现方案->前端+后端+前后端交互+配表
	* 根据参考挖掘**功能点**(列出清单，包括性能、网络、兼容等)
	* 将功能点映射成**测试点**
	* 将测试点完善为**测试用例**(全量>基础>核心(精简))
	* 完成测试及问题反馈
		* 需求完成进度
		* 细节匹配程度(需求与实现不可能100%统一)
		* 当需求或实现发生变动后，从第一步开始重新开始
	* 根据测试结果改进测试用例