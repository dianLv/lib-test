### 基本概念
* 版本: v1.1
* 名词->副本、位面、关卡、地下城...
	* 副本与场景内核一致，逻辑上副本是场景的**特化**，通过规则扩展实现差异
* 副本构成
	* 副本场景
	* 副本任务
	* 副本规则
		* 事件机制(触发盒、定时器)
		* 怪物生成机制(及召唤逻辑)
			* 固定生成点
			* 波次->由时间、副本进度等因素控制
			* 事件机制生成
		* 胜负条件(通关方式)
			* 持续时间
			* 击杀指定目标
			* 完成目标任务
		* 奖励机制
			* 一般掉落
			* 阶段奖励
			* 最终奖励
* 副本状态->开启、关闭(开启或关闭时，副本入口处是否有UI或其他表现)
	* 完全开启
	* 时间，特定时间开启
	* 事件/活动，特定条件下开启
	* 后台控制，指定，全局(设维护状态)
* 副本类型
	* 按人数区分
		* 单人本
		* 多人本
			* 队本(人数限定时强调多人合作)
			* 团本
				* 多队伍组成->涉及分队，人员调整，或包装为一个队伍
				* 门派组成->专门的组织与指挥
	* 按功能区分
		* 挑战本(生存、竞速等)
		* 任务/剧情本
		* 活动本
		* 公共本(类似于开放场景)
	* 按难度等
### 副本场景
* 场景构成
	* 引导区->指导或指引
		* 快速了解副本机制
		* 指明副本攻略方向
	* 安全区
		* 不受战斗、负面机制影响
		* 用于调整攻略节奏，提供交易、快速恢复等便利
		* 副本入口、重生点附近区域、特殊，战斗用安全区(由场景机制动态(配置)创建)
	* 分歧点(分岔路)
		* 分歧点对应区域的关系(并且，或)，需要同时满足，只需要满足一条
	* 同步点
		* 主要用于统一攻略进度
	* 机制区域
		* 陷阱区(陷阱盒)->需要绕过/解除/强行通过等形式
		* 战斗区
* 场景隔断与划分->将副本分隔成不同的功能/玩法区
	* 视野控制、引导
	* 空气墙->通过机制解除，如
		* 击杀特定目标(特定目标死亡时触发解除事件)
		* evn互动接触
	* 障碍->可视化的空气墙(如落石、门等于)
		* 简单破坏(攻击)
		* 专属物品进行破坏
		* Evn互动接触
	* 陷阱区域->如即死、持续掉血等，也可能刷新怪物
	* 平台x空间(移动限制)
		* 不可行走区
		* 平台破坏
	* 分割主场景、子场景->通过传送机制进行移动或转移
* 场景buff
	* 场景外buff是否允许带入
		* 清除
		* 冻结(如进入前保存，离开后恢复)
			* 2套系统，互不影响->副本独立
		* 白名单/黑名单
	* 场景内获得buff/debuff是否可以带出场景
	* 场景专属buff的获得方式
		* 进入时获得(全场景)
		* 场景怪物处获得
		* 场景NPC处获得
		* 场景物品/道具获得
		* 场景内特定区域(触发盒)
		* 定时刷新
	* 场景专属buff是否可以重新获得
		* 重新进入时
		* 复活时
		* 场景重置时
* 场景演出
	* 交互演出
	* 场景(进入)演出
	* 剧情演出
	* 登场演出=>玩家、特殊NPC、特殊monster(如boss)...
	* 击杀演出
* 场景重置
	* 原因
		* 挑战失败->全灭、倒计时结束
		* 主动重置
		* 定时重置
	* 程度
		* 局部重置(需要进行一致性检查, 确认是否存在残留)
		* 阶段重置
		* 全场景的重置(涉及人员/队伍离开)
	* 范围
		* 场景本身->涉及已触发区域
		* 场景中的NPC、monster、boss...
		* 副本任务
		* 出生点/重生点
		* 玩家当前位置
		* 难度类型的选择
		* 已发生的场景事件
		* 场景攻略时间(攻略倒计时/副本倒计时)
### 副本机制
* 基本组成
	* 副本时间->攻略时间
	* 出怪方式
* 进入副本
	* 进入条件(限制)
		* 副本处于开启状态
			* 是否存在副本开启的数量上限(单频道或全频道)
			* 副本独占或开放->副本是否允许多只独立队伍(开放性副本)
		* 前置条件(基本条件)
			* 等级限制
			* 职业限制(限定副本)
			* 副本进度是否一致
			* 队伍人数限制(人数一致或控制上限)
			* 未完成攻略(未完成，如未击杀boss, 未领取奖励)
			* 副本进入次数限制
			* 已完成攻略(是否限制，限制方式是什么: 如继续攻略没有奖励)
		* 费用限制
			* 类型=>不限制、获得道具游戏币、入场券(门票)
			* 扣除时机
				* 进入时扣除
					* 未完成时，是否返还，如果返回->
						* 返还时机: 当时、次日
						* 返还路径: 原路返还
				* 完成(阶段)时扣除
			* 扣除方式
				* 每人
				* 队长
				* 随意人员
				* 门派中扣除(团本)、团本指挥扣除
	* 入场方式
		* 单人(单人本)
			* 是否一定需要组队状态(1人成队)
			* 组队的情况下，组队人数是否限制
			* 无组队的要求下，组队状态是否限制进入
		* 组队
			* 组队人数限制
				* 是否限定队伍人数(2/4/6...)
				* 人数不足或超过时如何限制与提示
			* 副本进度限制
				* 是否统一全队攻略进度
			* 限制范围
				* 满足单人(任意)
				* 满足队长
				* 满足全部
		* 团本
			* 是否需要门派层面的组织(或临时组织)
				* 是否需要团本指挥，在线
			* 是否需要通过组队的方式(具体入场方式)
			* 按门派组织时，是否允许队伍中存在非门派成员
	* 重入机制(离开副本后重新进入副本)
		* 单人本
			* 离开后是否可以重入
			* 离开后副本进度是否保留(保留是否限时)
		* 组队本
			* 队伍成员离开后是否可以重新进入
				* 是否考虑队伍全员离开的情况
			* 队伍成员离开期间，攻略进度变更是否影响重新进入
			* 队伍成员离队是否可以加入新队员
				* 是否要求进度一致
				* 新人是否可以参与奖励
		* 团队本
			* 进出门派/同盟是否影响
		* 机制影响
			* 对副本buff的影响->是否获得副本buff
			* 对结算产生的影响->是否参与结算
* 离开副本
	* 离开原因
		* 中途离开
			* 是否可以重新进入副本
			* 是否影响副本进度，任务进度
			* 是否影响奖励发放
			* 是否影响副本奖励分配
			* 是否导致场景、怪的行为机制混乱
			* 是否影响副本难度变化
		* 攻略完成(完成任务与奖励)
			* 奖励发放期间
			* 奖励竞拍期间
	* 离开方式
		* 主动离开
			* 退出队伍
			* 退出副本
		* 被动离开
			* 队伍解散
			* 踢出队伍
				* 副本内是否限制踢出行为
				* 奖励发放期间是否限制踢出行为
			* 系统踢出
				* 副本已完成(完成击杀和奖励分配)
					* 自动将玩家送离场景(如倒计时)
					* 提供离开的交互(如传送点/门)
					* 离开后的队伍状态是否保持
				* 副本时间超时(副本场景时间，完成后场景倒计时)
				* 玩家掉线超时
					* 是否有恢复时间
					* 是否自动退队
					* 是否影响掉线玩家的副本进度，任务进度，奖励
						 * 是否出现副本攻略进度不一致
					 * 掉线恢复的位置(副本外，副本入口，相关重生点)
						 * 涉及离线期间被踢出队伍的处理
				* 特殊情况(受维护, 玩法关闭等影响)
		* 离开后情况
			* 队伍离开副本后，是否自动退出组队
			* 队伍离开副本后，是否保持组队状态
			* 设置组队规则，无法满足时自动退出队伍
	* 离开限制(限制队伍变动)
		* 奖励发放阶段
		* 拍卖阶段
	* 组队相关
		* 成员离开的影响
			* 离开后是否保留副本(或副本任务)进度
				* 如果重置, 重置范围是否合理
			* 离开后是否导致其他人员无法继续副本->人员补充
				* 进度无法推进
				* 奖励无法产生
			* 对已完成的任务是否可以正常交付
		* 队长离开的影响
			* 是否直接解散队伍
			* 是否导致全员离开副本
			* 是否重新选择队长
				* 由系统产生(顺位或其他规则)
				* 由玩家间竞选
				* 未产生队长的处理规则，如解散
			* 是否影响后续重新组队攻略当前副本
	* 门派相关(当门派成员或组织结构调整是否影响)
		* 积累性副本(长期攻略的进度积累)
			* 攻略期间是否限制门派解散
			* 攻略期间是否影响门派新人入场
				* 新人是否允许参加活动
			* 攻略期间变更门派是否影响2者进度
* 交互元素
	* 场景NPC
		* NPC是否可以交互
		* NPC类型
			* 任务NPC
			* 商人NPC->对应商店, 产出是否与当前副本有关
			* 剧情NPC(演出用)
			* 战斗NPC->需要关注行为、数值等
		* NPC登场、重生
			* NPC死亡再生机制
	* 场景交互物
		* 按实际用途划分
			* 手持类，可以被用于战斗、充当消耗道具激活机关等
			* 场景类(ENV)
				* 固定在场景中，可以作为场景的一部分，用来激活机关，可破坏障碍，影响场景，战斗等
				* 可移动装置(在固定位置间移动类)
		* 大致用途，充当消耗道具/场景物品，以影响当前场景、召唤怪物/NPC等
		* 物品交互范围
		* 物品刷新(再生)/激活相关
			* 出现=>进入时刷新
			* 再生=>取出或交互后是否可以再度交互，间隔时间
		* 离开时如何处理(手持类)
	* 场景怪物(行为/路线, 编组方式, 刷新方式(出现条件))
		* 普通怪
		* 精英怪/boss
		* 特殊怪(如，成就怪)
	* 场景道具(场内产出, 或副本专用道具)
		* 是否可以在场景外使用
		* 是否是场景类限制道具
* 副本重置->玩家与副本关系
	* 重置时机
		* 队伍解散
		* 全部离开
		* 全部死亡
		* 通过重置类物品进行重置
			* 是否存在每日/周的时机限制
		* 是否由每日/周特定时间的系统重置
			* 时间内保持副本状态、进度等记录，用于奖励获取、完成任务等情况
	* 重置范围
		* 奖励/掉落
		* 任务进度
		* 攻略进度
		* 隐藏积分
		* 限制次数
	* 重置副本攻略进度(主动重置，涉及重新攻略)
		* 未完成攻略(部分内容)
		* 已完成副本攻略(全部内容: 击杀boss，获得奖励，完成任务)
			* 是否允许重置(是否对重置次数进行限制)
			* 是否需要满足条件->消耗重置道具
			* 不同难度类型是否相互独立
			* 是否涉及当前副本任务(只重置入场限制)
			* 重置后影响奖励发放
* 副本攻略时间->防止玩家占用副本资源
	* 攻略时间限制
	* 超时惩罚机制
		* 将玩家(强制)移出副本
		* 强制死亡, 并使得玩家在副本外重生
		* 停止场景机制，并引导玩家离开
		* 移除或降低副本奖励
		* 引发boss(无限)狂暴机制等
* 难度控制
	* 控制方式
		* 入场时带入难度(提供不同入口，或根据队伍目标)
		* 场景内提供切换途径(动态)
			* 是否允许修改难度(包含什么时候允许修改难度)
			* 修改是否影响场景机制(奖励，AI，...)
			* 难度切换的时机与方式(限制)
				* 谁能切换->权限问题
				* 在什么地方切换->提供交互途径
				* 在什么时候切换->战斗中是否允许切换
			* 切换后，如何重置场景、怪物等内容
		* 动态控制
			* 根据队伍人数，职业分布，装备水平等
	* 控制内容
		* 对副本场景
			* 怪物数量, 刷新频率
			* 怪物属性、行为、能力->影响AI
			* 交互内容数量及刷新频率
		* 对攻略玩家
			* 影响buff/Debuff
			* 提供或增加(减轻难度的)道具
		* 影响掉落
* 结算与奖励
	* 参考因素
		* 固定产出(概率)
		* 攻略难度
		* 攻略时间
		* 击杀者职业->产出对应物品
		* 攻略队伍职业组成->产出相应职业装备，道具、材料
		* 攻略次数(队伍、队长、门派等)，如
			* (隐藏)积分机制
	* 产出方式
		* 通过掉落系统(monster/boss/NPC)
			* 独立
			* 共享(涉及分配)
			* 混合
		* 通过任务系统
	* 产出限制
		* 已获得/已攻略玩家限制奖励获得->如，带人过本
			* 存在该类玩家击杀boss时不产出的问题
	* 分配与归属
		* 平均分配/积分(贡献度)分配(用于其他方式的参考)->积分项，如
			* 统计攻击次数(涉及技能权重)
			* 统计伤害
			* 击杀者的额外积分
			* 死亡次数
			* 攻略时间等
		* 抢夺式(先到先得或击杀者专享)
		* 分配式(队长分配或击杀者分配)
		* 拍卖式(以货币的形似补偿未获得物品的玩家)
			* 参与条件->副本参与度，形式如积分等
			* 拍卖时离开或掉线如何处理
				* 已参与竞拍
					* 退出拍卖(涉及费用退回)
					* 以邮件或其他方式送达
				* 拍卖分红
					* 不分红
					* 以邮件或其他方式送达
			* 掉落时，玩家离线是否参与拍卖
		* 混合式(分配或拍卖)
			* 依据副本/系统规则
			* 玩家选择(投票或队长指定)
				* 是否可以中途变更, 变更时是否通知
			* 存在多组队伍时, 是否存在二次分配
* 副本任务
	* 任务分类
		* 副本主线->与副本攻略进度一致
		* 副本支线
	* 任务限制->约束或限制领取次数(每日/每周)
	* 领取方式
		* 自动领取(进入时自动获得)
		* 交互式领取, 通过道具或NPC获得
		* 副本掉落中触发获得
	  * 完成方式
		  * 自动完成
			  * 满足条件时，由系统直接完成
			  * 其他玩家交付时自动完成
		  * 主动交付
			  * 完成未交付时，如何处理
				  * 保持副本状态
				  * 提供副本外的任务交付方式
	  * 任务是否可以中断、取消
	  * 任务是否可以重置，重置方式是什么
		  * 当副本被重置时，对应任务是否一并重置
  * 出生点/重生点
	  * 防止重复与过度跑图
	  * 出生点
		  * 入场位置(默认), 也是默认的重生点(复活点)
		  * 特定阶段的重生点(场景破坏式的副本)
			  * 是否导致后入场玩家或中途玩家无法攻略
		  * 离开场景再入时返回位置
		  * 脱落卡死时返回位置
	  * 重生机制
		  * 根据玩家死亡位置重生到最近的出生点
		  * 根据副本攻略进度激活对应出生点
			  * 在最后攻略位置复活
			  * 通过交互激活或自动激活(触发式)
				  * 限制低参与玩家直接前往后续位置
	  * 重生机制存在的产生问题
		  * AI异常
		  * 导致场景机制不生效、错误生效
		  * 卡重生点...
			* 复活点被boss狂暴机制影响
			* 复活点处于场景的强制死亡区域
* 副本中死亡处理
	* 复活机制
		* 固定(默认复活机会)
		* 可变(额外复活机会)
		* 当boss狂暴导致的死亡，是否适用(适用时容易产生不必要消耗)
	* 复活后是否恢复副本相关buff
	* 贡献相关是否被清除
### 补充
* 全局副本设置=>由配置、数据库或后台进行设置
* boss机制组成
	* boss AI
		* 目标选择
			* 距离
			* 仇恨值
				* 职业
				* 伤害->威胁性
				* 技能隐藏分等
			* 倾向性
		* 技能池
	* 阶段划分
		* 阶段
			* 血量->随着血量下降解锁boss行为
				* 血量恢复后, boss是否返回原来阶段
				* 跨阶段后，boss AI/能力是否衔接
				* 是否存在血量保护(通过特定机制才能跨过)
			* 时间->随着时间解锁boss行为
			* 机制(由攻略方式控制)
				* 击杀特定怪物后改变boss阶段，或狂暴
					* 安排在副本攻略过程中
					* 安排在boss攻略过程中
				* 难度控制->获取特定道具、buff等控制难度
					* 通过副本事件，改变boss能力
				* boss狂暴机制->控制玩家行为，约束boss攻略时间
					* 即死(使场景内玩家直接死亡，存在被玩家解除的可能)
					* 属性翻倍，恢复速度增加
					* 添加各类抗性
					* 是否允许玩家在此时击杀boss, 及正常获得击杀奖励
		* 不同阶段是否涉及模型的变化
		* 不同阶段的能力差异(增益buff、抗性buff、技能池解锁)
		* 不同阶段重置，是否保留阶段与血量
	* boss交互
		* 与玩家
		* 与NPC
		* 与monster或其他boss
		* 与场景
			* 利用场景躲技能(技能只能被场景解除)
			* 利用场景机制影响boss属性、能力
			* 将特定区域标记为死亡区域->约束活动区域(添加标记、对特定区域的保护)
	* boss登场机制
		* 默认登场
		* 条件登场(一般为最终boss或隐藏boss, 满足条件时由场景机制召唤)
			* 满足条件
				* 满足攻略人数
				* 满足攻略时间
				* 满足(特定)击杀或数量
				* 触发登场事件
				* 通过Evn交互
				* 完成前置任务等
			* 消耗资源(代币、召唤物等，分场景内获取或场景外获取)
				* 队长提交
				* 自由提交
		* 登场限制
			* 被击杀后，boss是否允许再次登场
			* 未产生奖励时，boss是否允许再次登场
		* 复数boss登场
			* 同时登场
			* 随机登场
			* 接续登场
	* boss重置机制
		* 重置原因
			* 攻略时间结束、副本任务失败
			* 丢失全部玩家的视野(存在卡视野导致的无法脱战)
			* 场景内玩家全部死亡
			* 最大活动范围(含追击范围)内无活动玩家(即无攻击状态玩家)
		* 重置方式
			* 重置场景
				* 涉及将玩家重置到场景外/指定位置
				* 重置后，是否需要重新消耗资源
			* 重置boss
				* 销毁并重新召唤
				* 恢复数值、状态
				* 重置
* 跨服副本相关
	* 跨服机制
		* 专门(跨服)服务器(涉及数据传输与回传(物品道具消耗、任务状态刷新、奖励获取(物品、货币、经验等))，功能限制)
		* 网关动态选择一个服务器承担跨服任务，并通过网关或中心服务器转发跨服数据
	* 匹配机制->如何匹配队友，成员补充，手动组队
	* 跨服结束->队伍是否维持
* 副本场景的限制元素
	* (中途)boss战是否可以被绕过->可能的原因，如
		* 错误的重生区域，导致复活后，直接前往下一场景
		* boss可以被强行突破(未设限制)
	* 空气墙是否可以被穿透
		* 主动位移(如闪现位移)
		* 被动位移(如硬控类技能, 倒地、投技)
	* 障碍是否可以被穿透(是否在服务器端添加校验，或者障碍关联后续内容)
		* 防止资源消耗点无效化
	* 地面是否可以被穿透(副本场景一般比外部场景，更多交互区域，复杂模型)
		* 下落检测失灵->如位移类技能导致的下落、倒地等
		* 下落检测频率低->碰撞区涉及及检测
		* 场景模型存在缝隙->如倾斜面、多模型堆积区域(如岩石、墙壁等)
		* p.s. 如果允许墙面攀爬或移动也存在穿透问题
	* 子场景
		* 子场景进入、离开限制
		* 子场景所涉及重置相关内容
			* 对子场景本身
			* 对父场景的影响
			* 离开子场景是退出副本，还是返回父场景
* (常见)副本事件枚举
	* 场景(包含子场景)
		* 进入
		* 离开
		* 场景重置
	* 攻略玩家
		* 死亡
		* 人员变化
	* 怪物
		* 刷新
		* 进入战斗(特定怪物进入战斗时使用)
		* 离开战斗
		* 血量变化
		* 死亡
	* 奖励
		* 产生
		* 获取
* 特殊情况
	* 活动相关(活动开始前进入副本，活动开始后，副本能让是否发生改变)
		* 活动相关元素是否影响副本
		* 活动奖励相关是否进入副本产出
		* 结算时，活动是否影响奖励产出 
	* 停服相关(停服对副本的影响)
		* 强制踢出，踢出是否提供补充
		* 关闭副本入口，并等待副本攻略完成(一般在停服前进行)
		* 停服恢复是否影响未完成副本
	* 隐藏内容
		* 满足特定条件
			* 击杀特定怪物
			* 规定时间内完成副本等
	* 随机事件